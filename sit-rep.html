<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Sit-Rep Template</title>
    <!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script> -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <script src="js/bootstrap.min.js"></script>
    <script src="js/js-yaml.min.js"></script>
    <!-- <script src="js/html5-qrcode.min.js"></script> -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            /* max-height: calc(100vh - 440px); */
            align-items: center;
            justify-content: center;
	        padding-bottom: 500px;
        }
 
        .form-floating label {
            /* Adjust the floating label style for better visibility */
            font-weight: bold; /* Keeps the label text bold */
        }

        .printable{
            display:none;
        }

        @media print {
            .printable {display:block;}
            .screen {display:none;}

            h1, h2, h3, h4, h5, h6, span, a {
                color: #000 !important;
            }

            p{
                text-indent:50px;
                color: #000 !important;
            }

            .bg-primary, .bg-secondary, .bg-success, .bg-danger, .bg-warning, .bg-info, .bg-dark {
                background-color: #fff !important;
            }

            body {
                -webkit-filter: grayscale(100%); /* For WebKit browsers like Chrome, Safari */
                -moz-filter: grayscale(100%);    /* For Firefox */
                -ms-filter: grayscale(100%);     /* For Internet Explorer/Edge */
                filter: grayscale(100%);         /* Standard CSS3 property */
            }

        }
    </style>
  </head>
  <body>
    <div class="screen">
        <h2 style="text-align: center;">Situation Report</h2>
        <div class="accordion container-lg" id="SitRepAccordion">
            <div class="accordion-item">
                <h2 class="accordion-header" id="IncidentHeader">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseIncident">
                        Incident
                    </button>
                </h2>
                <div id="collapseIncident" class="accordion-collapse collapse" data-bs-parent="#SitRepAccordion">
                    <div class="accordion-body">
                        <form id="InformativeMessage" name="Informative Message" id="InformativeMessage">
                            <div class="row">
                                <div class="input-group col-sm">
                                    <div class="input-group-prepend w-50">
                                        <span class="input-group-text w-100" name="From">From</span>
                                    </div>
                                    <input class="form-control" id="From" name="From" autocomplete="name" placeholder="Your Name"/>
                                </div>
                                <div class="input-group col-sm">
                                    <div class="input-group-prepend w-50">
                                        <span class="input-group-text w-100">At</span>
                                    </div>
                                    <input class="form-control" id="AtDateTime" Name="At"/>
                                </div>
                            </div>
                            <div class="row">
                                <div class="input-group col-sm">
                                    <div class="input-group-prepend w-50">
                                        <span class="input-group-text w-100">Incident Name</span>
                                    </div>
                                    <input class="form-control" id="IncidentName" name="Incident Name"/>
                                </div>
                                <div class="input-group col-sm">
                                    <div class="input-group-prepend w-50">
                                        <span class="input-group-text w-100">Incident Number</span>
                                    </div>
                                    <input class="form-control" list="IncidentNumberList" id="IncidentNumber" name="Incident Number"/>
                                    <datalist id="IncidentNumberList"></datalist>
                                </div>
                            </div>
                            <div class="row">
                                <div class="input-group col-sm">
                                    <div class="input-group-prepend w-50">
                                        <span class="input-group-text w-100">Controlling Agency</span>
                                    </div>
                                    <input class="form-control" list="ControllingAgencyList" id="Controlling_Agency" name="Controlling Agency" placeholder="..."/>
                                    <datalist id="ControllingAgencyList">
                                        <option value="DFES">
                                        <option value="DBCA PaWS">
                                        <option value="City of Bayswater">
                                        <option value="City of Belmont">
                                        <option value="City of Canning">
                                        <option value="City of Fremantle">
                                        <option value="City of Melville">
                                        <option value="City of Nedlands">
                                        <option value="City of Perth">
                                        <option value="City of South Perth">
                                        <option value="City of Stirling">
                                        <option value="City of Subiaco">
                                        <option value="City of Vincent">
                                        <option value="Shire of Peppermint Grove">
                                        <option value="Town of Bassendean">
                                        <option value="Town of Cambridge">
                                        <option value="Town of Claremont">
                                        <option value="Town of Cottesloe">
                                        <option value="Town of East Fremantle">
                                        <option value="Town of Mosman Park">
                                        <option value="Town of Victoria Park">
                                        <option value="City of Kalamunda">
                                        <option value="City of Swan">
                                        <option value="Shire of Mundaring">
                                        <option value="City of Joondalup">
                                        <option value="City of Wanneroo">
                                        <option value="City of Armadale">
                                        <option value="City of Gosnells">
                                        <option value="Shire of Serpentine-Jarrahdale">
                                        <option value="City of Cockburn">
                                        <option value="City of Kwinana">
                                        <option value="City of Rockingham">
                                    </datalist>
                                </div>
                                <div class="input-group col-sm">
                                    <span class="input-group-text">Authority</span>
                                    <select class="form-select" id="Authority" name="Authority" placeholder="...">
                                        <option selected></option>
                                        <option value="Bushfires Act 1954">Bushfires Act 1954</option>
                                        <option value="Fire Brigades Act 1942">Fire Brigades Act 1942</option>
                                        <option value="Conservation and Land Management Act 1984">Conservation and Land Management Act 1984</option>
                                    </select>
                                </div>
                            </div>
                            <div class="row">
                                <div class="input-group col-sm">
                                    <div class="input-group-prepend w-50">
                                        <span class="input-group-text w-100">Section 13</span>
                                    </div>
                                    <select class="form-select" id="Section 13" name="Section 13" placeholder="...">
                                        <option selected></option>
                                        <option value="Submitted">Submitted</option>
                                        <option value="Approved">Approved</option>
                                        <option value="Rejected">Rejected</option>
                                        <option value="Revoked">Revoked</option>
                                    </select>
                                </div>
                                <div class="input-group col-sm">
                                    <div class="input-group-prepend w-50">
                                        <span class="input-group-text w-100">Section 45/45A</span>
                                    </div>
                                    <select class="form-select" id="Section 45/45A" name="Section 45/45A" placeholder="...">
                                        <option selected></option>
                                        <option value="DBCA to LGA">DBCA to LGA</option>
                                        <option value="LGA to DBCA">LGA to DBCA</option>
                                    </select>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            <div class="accordion-item">
                <h2 class="accordion-header" id="SituationHeader">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSituation">
                        Situation
                    </button>
                </h2>
                <div id="collapseSituation" class="accordion-collapse collapse" data-bs-parent="#SitRepAccordion">
                    <div class="accordion-body">
                        <form id="Situation" name="Situation">
                            <div class="row">
                                <div class="input-group col-sm">
                                    <span class="input-group-text">Classification</span>
                                    <select class="form-select" id="classification" name="Classification">
                                        <option selected>...</option>
                                        <option value="1st Alarm">1st Alarm</option>
                                        <option value="2nd Alarm">2nd Alarm</option>
                                        <option value="3rd Alarm">3rd Alarm</option>
                                        <option value="4th Alarm">4th Alarm</option>
                                        <option value="5th Alarm">5th Alarm</option>
                                    </select>
                                    <span class="input-group-text d-none d-md-block">Tree/Grass/Scrub Fire</span>
                                </div>
                                <div class="input-group col-sm">
                                    <span class="input-group-text w-50">Level</span>
                                    <select class="form-select" id="level" name="Level">
                                        <option selected>...</option>
                                        <option value="1">1</option>
                                        <option value="2">2</option>
                                        <option value="3">3</option>
                                    </select>
                                </div>
                            </div>
                            <div class="row">
                                <div class="input-group col-sm">
                                    <span class="input-group-text w-50">
                                        Status</span>
                                        <input class="form-control" list="StatusList" id="Incident_Status" name="Status" placeholder="...">
                                        <datalist id="StatusList">
                                            <option value="Uncontained, Uncontrolled">
                                            <option value="Contained, Not Controlled">
                                            <option value="Contained and Controlled">
                                        </datalist>
                                </div>
                                <div class="input-group col-sm">
                                    <span class="input-group-text w-50">Firefighting Activities</span>
                                        <input class="form-control" list="FirefightingActivitiesList" id="Firefighting_Activities" name="Firefighting Activities" placeholder="...">
                                        <datalist id="FirefightingActivitiesList">
                                            <option value="Asset Protection">
                                            <option value="Attacking the Headfire">
                                            <option value="Attacking the Flanks">
                                            <option value="Mopping Up">
                                            <option value="Patrolling">
                                        </datalist>
                                </div>
                            </div>
                            <div class="row">
                                <div class="input-group col-sm">
                                    <span class="input-group-text w-50">Fuel Type</span>
                                        <input class="form-control" list="FuelTypeList" id="Fuel_Type" placeholder="..." name="Fuel Type">
                                        <datalist id="FuelTypeList">
                                            <option value="Tree, Grass, Scrub">
                                            <option value="Grass">
                                            <option value="Coastal Heath">
                                            <option value="Jarrah Forest">
                                            <option value="Kari Forest">
                                        </datalist>
                                </div>
                                <div class="input-group col-sm">
                                    <span class="input-group-text w-50">Fuel Load</span>
                                        <input type="text" class="form-control" id="Fuel_Load" placeholder="t/ha" name="Fuel Load">
                                </div>
                            </div>
                            <div class="row">
                                <div class="input-group col-sm">
                                    <span class="input-group-text w-50">Fire Size</span>
                                        <input type="text" class="form-control" id="Fire_Size" placeholder="ha" name="Fire Size">
                                </div>
                                <div class="input-group col-sm">
                                    <span class="input-group-text w-50">Fire Perimeter</span>
                                        <input type="text" class="form-control" id="Fire_Perimeter" placeholder="km" name="Fire Perimeter">
                                </div>
                            </div>
                            <div class="row">
                                <div class="input-group col-sm">
                                    <span class="input-group-text w-50">Percentage Tracked</span>
                                        <input class="form-control" list="PercentageTrackedList" id="Percentage_Tracked" placeholder="..." name="Percentage Tracked">
                                        <datalist id="PercentageTrackedList">
                                            <option value="10%">
                                            <option value="25%">
                                            <option value="33%">
                                            <option value="50%">
                                            <option value="66%">
                                            <option value="75%">
                                            <option value="80%">
                                            <option value="90%">
                                            <option value="95%">
                                            <option value="100%">
                                        </datalist>
                                </div>
                                <div class="input-group col-sm">
                                    <span class="input-group-text w-50">Time to Control</span>
                                    <input type="text" class="form-control" id="Time_to_control" placeholder="hrs" name="Time to Control">
                                </div>                
                            </div>
                            <hr>
                            <div class="row">
                                <div class="form-floating">
                                    <textarea 
                                        class="form-control rounded" 
                                        id="SituationComments"
                                        name="Comments"
                                        style="height: 250px"></textarea>
                                    <label for="textareaTactics">Comments</label>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            <div class="accordion-item">
                <h2 class="accordion-header" id="LossesHeader">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseLosses">
                        Losses and Evacuations
                    </button>
                </h2>
                <div id="collapseLosses" class="accordion-collapse collapse" data-bs-parent="#SitRepAccordion">
                    <div class="accordion-body">
                        <form id="LossesAndEvacuations" name="Losses and Evacuations">
                            <div class="row g-3">
                                <div class="input-group col-sm">
                                    <span class="input-group-text w-50">Dwellings</span>
                                    <div class="form-floating">
                                        <input type="number" class="form-control"  id="DwellingsLost" name="Dwellings Lost" placeholder="0">
                                        <label for="DwellingsLost">Lost</label>
                                    </div>
                                    <div class="form-floating">
                                        <input type="number" class="form-control" id="DwellingsDamaged" name="Dwellings Damaged" placeholder="0">
                                        <label for="DwellingsDamaged">Damaged</label>
                                    </div>
                                </div>
                                <div class="input-group col-sm">
                                    <span class="input-group-text w-50">Non-residential</span>
                                    <div class="form-floating">
                                        <input type="number" class="form-control" id="NonResidentialLost" name="Non-Residential Lost" placeholder="0">
                                        <label for="NonResidentialLost">Lost</label>
                                    </div>
                                    <div class="form-floating">
                                        <input type="number" class="form-control" id="NonResidentialDamaged" name="Non-Residential Damaged" placeholder="0">
                                        <label for="NonResidentialDamaged">Damaged</label>
                                    </div>
                                </div>                
                            </div>
                            <div class="row g-3">
                                <div class="input-group col-sm">
                                    <span class="input-group-text w-50">Commercial</span>
                                    <div class="form-floating">
                                        <input type="number" class="form-control" id="CommercialLost" name="Commercial Lost" placeholder="0">
                                        <label for="CommercialLost">Lost</label>
                                    </div>
                                    <div class="form-floating">
                                        <input type="number" class="form-control" id="CommercialDamaged" name="Commercial Damaged" placeholder="0">
                                        <label for="CommercialDamaged">Damaged</label>
                                    </div>
                                </div>
                                <div class="input-group col-sm">
                                    <span class="input-group-text w-50">Infrastructure</span>
                                    <div class="form-floating">
                                        <input type="number" class="form-control" id="InfrastructureLost" name="Infrastructure Lost" placeholder="0">
                                        <label for="InfrastructureLost">Lost</label>
                                    </div>
                                    <div class="form-floating">
                                        <input type="number" class="form-control" id="InfrastructureDamaged" name="Infrastructure Damaged" placeholder="0">
                                        <label for="InfrastructureDamaged">Damaged</label>
                                    </div>
                                </div>                
                            </div>
                            <hr>
                            <div class="row">
                                <div class="form-floating">
                                    <textarea 
                                        class="form-control rounded" 
                                        id="OtherLosses"
                                        name="Other Losses"
                                        style="height: 250px"></textarea>
                                    <label for="textareaTactics">Other Losses</label>
                                </div>
                            </div>
                            <hr>
                            <div class="row">
                                <div class="input-group col-sm">
                                    <span class="input-group-text w-50">Evacuations</span>
                                        <input class="form-control" id="Evacuations" name="Evacuations" placeholder="0">
                                </div>
                                <div class="input-group col-sm">
                                    <span class="input-group-text w-50">Evacuation Centre</span>
                                    <input type="text" class="form-control" id="EvacuationCentre" name="Evacuation Centre" placeholder="Location...">
                                </div>                
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            <div class="accordion-item">
                <h2 class="accordion-header" id="PublicInformationHeader">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapsePublicInformation">
                        Public Information
                    </button>
                </h2>
                <div id="collapsePublicInformation" class="accordion-collapse collapse" data-bs-parent="#SitRepAccordion">
                    <div class="accordion-body">
                        <form id="PublicInformation" name="Public Information">
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="input-group">
                                        <span class="input-group-text w-50">Emergency Warnings</span>
                                        <input type="number" class="form-control" id="EmergencyWarnings" name="Emergency Warnings" placeholder="0">
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="input-group">
                                        <span class="input-group-text w-50">Watch and Act</span>
                                        <input type="number" class="form-control" id="WatchAndAct" name="Watch and Act" placeholder="0">
                                    </div>
                                </div>                
                            </div>
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="input-group">
                                        <span class="input-group-text w-50">Bushfire Advice</span>
                                        <input type="number" class="form-control" id="BushfireAdvice" name="Bushfire Advice" placeholder="0">
                                    </div>
                                </div>                
                            </div>                        
                            <hr>
                            <div class="row g-3">
                                <div class="form-floating">
                                    <textarea 
                                        class="form-control rounded-lg" 
                                        id="RoadClosures"
                                        name="Road Closures"
                                        style="height: 250px"></textarea>
                                    <label for="textareaTactics">Road Closures</label>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>        
            <div class="accordion-item">
                <h2 class="accordion-header" id="ObjectivesHeader">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseObjectives">
                        Objectives
                    </button>
                </h2>
                <div id="collapseObjectives" class="accordion-collapse collapse" data-bs-parent="#SitRepAccordion">
                    <div class="accordion-body">
                        <form id="Objectives" name="Objectives">
                            <div class="row">
                                <div class="input-group">
                                    <button class="btn btn-outline-secondary" type="button" id="objective1Button" onclick="toggleInputValue('objective1', 'Protect lives of responders, and prevent damage to property, critical infrastructure, and public values within the incident area for the full duration of the incident.')">1</button>
                                    <input type="text" class="form-control text-primary" id="objective1" list="objectivelist1" placeholder="Protect lives of responders, and prevent damage to property, critical infrastructure, and public values within the incident area for the full duration of the incident." name="(1)">
                                    <datalist id="objectivelist1">
                                        <option>Protect lives of responders, and prevent damage to property, critical infrastructure, and public values within the incident area for the full duration of the incident.</option>
                                    </datalist>
                                </div>
                            </div>
                            <div class="row">
                                <div class="input-group">
                                    <button class="btn btn-outline-secondary" type="button" id="objective2Button" onclick="toggleInputValue('objective2', 'Provide timely, relevant, and accurate community warnings and public information for the duration of the incident.')">2</button>
                                    <input type="text" class="form-control text-primary" id="objective2" list="objectivelist2" placeholder="Provide timely, relevant, and accurate community warnings and public information for the duration of the incident." name="(2)">
                                    <datalist id="objectivelist2">
                                        <option>Provide timely, relevant, and accurate community warnings and public information for the duration of the incident.</option>
                                    </datalist>
                                </div>
                            </div>
                            <div class="row">
                                <div class="input-group">
                                    <button class="btn btn-outline-secondary" type="button" id="objective3Button" onclick="toggleInputValue('objective3', 'Contain fire to ')">3</button>
                                    <input type="text" class="form-control text-primary" id="objective3" list="objectivelist3" placeholder="Contain fire to " name="(3)">
                                    <datalist id="objectivelist3">
                                        <option>Contain fire to </option>
                                    </datalist>
                                </div>
                            </div>
                            <div class="row">
                                <div class="input-group">
                                    <button class="btn btn-outline-secondary" type="button" id="objective4Button" onclick="toggleInputValue('objective4', 'Contain and Control by ')">4</button>
                                    <input type="text" class="form-control text-primary" id="objective4" list="objectivelist4" placeholder="Contain and Control by " name="(4)">
                                    <datalist id="objectivelist4">
                                        <option>Contain and Control by </option>
                                    </datalist>
                                </div>
                            </div>
                            <div class="row">
                                <div class="input-group">
                                    <button class="btn btn-outline-secondary" type="button" id="objective5Button" onclick="toggleInputValue('objective5', 'Make area safe by ')">5</button>
                                    <input type="text" class="form-control text-primary" id="objective5" list="objectivelist5" placeholder="Make area safe by " name="(5)">
                                    <datalist id="objectivelist5">
                                        <option>Make area safe by </option>
                                    </datalist>
                                </div>
                            </div>
                            <div class="row">
                                <div class="input-group">
                                    <button class="btn btn-outline-secondary" type="button" id="objective6Button" onclick="toggleInputValue('objective6', 'Hand back to landowner by ')">6</button>
                                    <input type="text" class="form-control text-primary" id="objective6" list="objectivelist6" placeholder="Hand back to landowner by " name="(6)">
                                    <datalist id="objectivelist6">
                                        <option>Hand back to landowner by </option>
                                    </datalist>
                                </div>
                            </div>
                            <div class="row">
                                <div class="input-group">
                                    <button class="btn btn-outline-secondary" type="button" id="objective7Button" onclick="toggleInputValue('objective7', '')">7</button>
                                    <input type="text" class="form-control text-primary" id="objective7" placeholder="Other" name="(7)">
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            <div class="accordion-item">
                <h2 class="accordion-header" id="IMTHeader">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseIMT">
                        IMT
                    </button>
                </h2>
                <div id="collapseIMT" class="accordion-collapse collapse" data-bs-parent="#SitRepAccordion">
                    <div class="accordion-body">
                        <form id="IMT" name="IMT">
                            <div class="row">
                                <div class="input-group">
                                    <span class="input-group-text w-25">Control Point</span>
                                    <input type="text" class="form-control" id="ControlPoint" name="Control Point">
                                </div>
                            </div>
                            <div class="row">
                                <div class="input-group">
                                    <span class="input-group-text w-25">Communications Plan</span>
                                    <input class="form-control" list="CommunicationsPlanList" id="CommunicationsPlan" name="Communications Plan" placeholder="...">
                                        <datalist id="CommunicationsPlanList">
                                            <option id="MNC1" value="MNC1 - Command Channel 247, Sector Channels 354 - 359">MNC1 - Command Channel 247, Sector Channels 354 - 359</option>
                                            <option id="MNC2" value="MNC2 - Command Channel 294, Sector Channels 354 - 359">MNC2 - Command Channel 294, Sector Channels 354 - 359</option>
                                            <option id="MNC3" value="MNC3 - Command Channel 133, Sector Channels 360 - 365">MNC3 - Command Channel 133, Sector Channels 360 - 365</option>
                                            <option id="MNC4" value="MNC4 - Command Channel 153, Sector Channels 354 - 359">MNC4 - Command Channel 153, Sector Channels 354 - 359</option>
                                            <option id="MNC5" value="MNC5 - Command Channel 224, Sector Channels 360 - 365">MNC5 - Command Channel 224, Sector Channels 360 - 365</option>
                                            <option id="MNC6" value="MNC6 - Command Channel 261, Sector Channels 354 - 359">MNC6 - Command Channel 261, Sector Channels 354 - 359</option>
                                            <option id="MNE1" value="MNE1 - Command Channel 346, Sector Channels 360 - 365">MNE1 - Command Channel 346, Sector Channels 360 - 365</option>
                                            <option id="MNE2" value="MNE2 - Command Channel 110, Sector Channels 354 - 359">MNE2 - Command Channel 110, Sector Channels 354 - 359</option>
                                            <option id="MNE3" value="MNE3 - Command Channel 112, Sector Channels 360 - 365">MNE3 - Command Channel 112, Sector Channels 360 - 365</option>
                                            <option id="MCC1" value="MCC1 - Command Channel 231, Sector Channels 354 - 359">MCC1 - Command Channel 231, Sector Channels 354 - 359</option>
                                            <option id="MCC2" value="MCC2 - Command Channel 173, Sector Channels 360 - 365">MCC2 - Command Channel 173, Sector Channels 360 - 365</option>
                                            <option id="MCC3" value="MCC3 - Command Channel 316, Sector Channels 354 - 359">MCC3 - Command Channel 316, Sector Channels 354 - 359</option>
                                            <option id="MCC4" value="MCC4 - Command Channel 229, Sector Channels 360 - 365">MCC4 - Command Channel 229, Sector Channels 360 - 365</option>
                                            <option id="MCC5" value="MCC5 - Command Channel 138, Sector Channels 354 - 359">MCC5 - Command Channel 138, Sector Channels 354 - 359</option>
                                            <option id="MCC6" value="MCC6 - Command Channel 121, Sector Channels 360 - 365">MCC6 - Command Channel 121, Sector Channels 360 - 365</option>
                                            <option id="MCE1" value="MCE1 - Command Channel 142, Sector Channels 360 - 365">MCE1 - Command Channel 142, Sector Channels 360 - 365</option>
                                            <option id="MCE2" value="MCE2 - Command Channel 260, Sector Channels 354 - 359">MCE2 - Command Channel 260, Sector Channels 354 - 359</option>
                                            <option id="MCE3" value="MCE3 - Command Channel 206, Sector Channels 360 - 365">MCE3 - Command Channel 206, Sector Channels 360 - 365</option>
                                            <option id="MCE4" value="MCE4 - Command Channel 238, Sector Channels 354 - 359">MCE4 - Command Channel 238, Sector Channels 354 - 359</option>
                                            <option id="MCE5" value="MCE5 - Command Channel 141, Sector Channels 354 - 359">MCE5 - Command Channel 141, Sector Channels 354 - 359</option>
                                            <option id="MCE6" value="MCE6 - Command Channel 144, Sector Channels 354 - 359">MCE6 - Command Channel 144, Sector Channels 354 - 359</option>
                                            <option id="MCE7" value="MCE7 - Command Channel 128, Sector Channels 360 - 365">MCE7 - Command Channel 128, Sector Channels 360 - 365</option>
                                            <option id="MSC1" value="MSC1 - Command Channel 109, Sector Channels 354 - 359">MSC1 - Command Channel 109, Sector Channels 354 - 359</option>
                                            <option id="MSC2" value="MSC2 - Command Channel 234, Sector Channels 360 - 365">MSC2 - Command Channel 234, Sector Channels 360 - 365</option>
                                            <option id="MSC3" value="MSC3 - Command Channel 168, Sector Channels 354 - 359">MSC3 - Command Channel 168, Sector Channels 354 - 359</option>
                                            <option id="MSC4" value="MSC4 - Command Channel 161, Sector Channels 354 - 359">MSC4 - Command Channel 161, Sector Channels 354 - 359</option>
                                            <option id="MSE1" value="MSE1 - Command Channel 221, Sector Channels 360 - 365">MSE1 - Command Channel 221, Sector Channels 360 - 365</option>
                                            <option id="MSE2" value="MSE2 - Command Channel 218, Sector Channels 354 - 359">MSE2 - Command Channel 218, Sector Channels 354 - 359</option>
                                            <option id="MSE3" value="MSE3 - Command Channel 139, Sector Channels 360 - 365">MSE3 - Command Channel 139, Sector Channels 360 - 365</option>
                                            <option id="MSE4" value="MSE4 - Command Channel 170, Sector Channels 354 - 359">MSE4 - Command Channel 170, Sector Channels 354 - 359</option>
                                        </datalist>
                                </div>
                            </div>
                            <div class="row">
                                <div class="input-group">
                                    <span class="input-group-text w-25">Incident Controller</span>
                                    <input type="text" class="form-control" id="IncidentController" name="Incident Controller">
                                </div>
                            </div>
                            <div class="row">
                                <div class="input-group">
                                    <span class="input-group-text w-25">Deputy IC</span>
                                    <input type="text" class="form-control" id="Deputy IC" name="Deputy IC">
                                </div>
                            </div>
                            <div class="row">
                                <div class="input-group">
                                    <span class="input-group-text w-25">Operations</span>
                                    <input type="text" class="form-control" id="Operations" name="Operations">
                                </div>
                            </div>
                            <div class="row">
                                <div class="input-group">
                                    <span class="input-group-text w-25">Deputy Ops</span>
                                    <input type="text" class="form-control" id="Deputy Ops" name="Deputy Ops">
                                </div>
                            </div>
                            <div class="row">
                                <div class="input-group">
                                    <span class="input-group-text w-25">Planning</span>
                                    <input type="text" class="form-control" id="Planning" name="Planning">
                                </div>
                            </div>
                            <div class="row">
                                <div class="input-group">
                                    <span class="input-group-text w-25">Logistics</span>
                                    <input type="text" class="form-control" id="Logistics" name="Logistics"">
                                </div>
                            </div>
                            <div class="row">
                                <div class="input-group">
                                    <span class="input-group-text w-25">Management Support</span>
                                    <input type="text" class="form-control" id="ManagementSupport" name="Management Suport">
                                </div>
                            </div>
                            <div class="row">
                                <div class="input-group">
                                    <span class="input-group-text w-25">Media Liason</span>
                                    <input type="text" class="form-control" id="MediaLiason" name="Media Liason">
                                </div>
                            </div>   
                            <div class="row">
                                <div class="input-group">
                                    <span class="input-group-text w-25">Public Information</span>
                                    <input type="text" class="form-control" id="PublicInformation" name="Public Information">
                                </div>
                            </div>     
                            <div class="row">
                                <div class="input-group">
                                    <span class="input-group-text w-25">Situation Analysis</span>
                                    <input type="text" class="form-control" id="SituationAnalysis" name="Situation Analysis">
                                </div>
                            </div>
                            <hr>
                            <div class="row g-3">
                                <div class="form-floating">
                                    <textarea 
                                        class="form-control rounded-lg" 
                                        id="Divisions"
                                        name="Divisions"
                                        style="height: 250px"></textarea>
                                    <label for="Divisions">Divisions</label>
                                </div>
                            </div>
                            <hr> 
                            <div class="row g-3">
                                <div class="form-floating">
                                    <textarea 
                                        class="form-control rounded-lg" 
                                        id="Sectors"
                                        name="Sectors"
                                        style="height: 250px"></textarea>
                                    <label for="Sectors">Sectors</label>
                                </div>
                            </div>          
                        </form>
                    </div>
                </div>
            </div>
            <div class="accordion-item">
                <h2 class="accordion-header" id="Operations">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOperations">
                        Operations
                    </button>
                </h2>
                <div id="collapseOperations" class="accordion-collapse collapse" data-bs-parent="#SitRepAccordion">
                    <div class="accordion-body">
                        <form id="Tactics" name="Tactics">
                            <legend>Tactics</legend>
                            <div class="row">
                                <div class="input-group">
                                    <button class="btn btn-outline-secondary" type="button" id="tactic0Button" onclick="toggleInputValue('tactic0', 'Ensure firefighter safety is prioritised over all other considerations, and that crews are to withdraw and communicate via chain of command if safety is being compromised or strategies are ineffective;')">1.1</button>
                                    <input type="text" class="form-control text-primary" id="tactic0" list="tacticlist0" placeholder="Ensure firefighter safety is prioritised over all other considerations, and that crews are to withdraw and communicate via chain of command if safety is being compromised or strategies are ineffective;" name="1.1">
                                    <datalist id="tacticlist0">
                                        <option>Ensure firefighter safety is prioritised over all other considerations, and that crews are to withdraw and communicate via chain of command if safety is being compromised or strategies are ineffective;</option>
                                    </datalist>
                                </div>
                            </div>
                            <div class="row">
                                <div class="input-group">
                                    <button class="btn btn-outline-secondary" type="button" id="tactic1Button" onclick="toggleInputValue('tactic1', 'Integrate local knowledge into the IMT and utilise spatial information/critical infrastructure reports to determine protection priorities and strategies;')">1.2</button>
                                    <input type="text" class="form-control text-primary" id="tactic1" list="tacticlist1" placeholder="Integrate local knowledge into the IMT and utilise spatial information/critical infrastructure reports to determine protection priorities and strategies;" name="1.2">
                                    <datalist id="tacticlist1">
                                        <option>Integrate local knowledge into the IMT and utilise spatial information/critical infrastructure reports to determine protection priorities and strategies;</option>
                                    </datalist>
                                </div>
                            </div>
                            <div class="row">
                                <div class="input-group">
                                    <button class="btn btn-outline-secondary" type="button" id="tactic2Button" onclick="toggleInputValue('tactic2', 'Parallel attack on the flank fires, supported by suppression aircraft and consolidated through tracking with machinery.')">2.1</button>
                                    <input type="text" class="form-control text-primary" id="tactic2" list="tacticlist2" placeholder="Parallel attack on the flank fires, supported by suppression aircraft and consolidated through tracking with machinery." name="2.1">
                                    <datalist id="tacticlist2">
                                        <option>Parallel attack on the flank fires, supported by suppression aircraft and consolidated through tracking with machinery.</option>
                                    </datalist>
                                </div>
                            </div>
                            <div class="row">
                                <div class="input-group">
                                    <button class="btn btn-outline-secondary" type="button" id="tactic3Button" onclick="toggleInputValue('tactic3', 'Contain fire within constructed mineral earth firebreaks;')">2.2</button>
                                    <input type="text" class="form-control text-primary" id="tactic3" list="tacticlist3" placeholder="Contain fire within constructed mineral earth firebreaks;" name="2.2">
                                    <datalist id="tacticlist3">
                                        <option>Contain fire within constructed mineral earth firebreaks;</option>
                                    </datalist>
                                </div>
                            </div>
                            <div class="row">
                                <div class="input-group">
                                    <button class="btn btn-outline-secondary" type="button" id="tactic4Button" onclick="toggleInputValue('tactic4', 'Public information and warnings via DFES Coordinator Public Information;')">3.1</button>
                                    <input type="text" class="form-control text-primary" id="tactic4" list="tacticlist4" placeholder="Public information and warnings via DFES Coordinator Public Information;" name="3.1">
                                    <datalist id="tacticlist4">
                                        <option>Public information and warnings via DFES Coordinator Public Information;</option>
                                    </datalist>
                                </div>
                            </div>
                            <div class="row">
                                <div class="input-group">
                                    <button class="btn btn-outline-secondary" type="button" id="tactic5Button" onclick="toggleInputValue('tactic5', 'Incident situation reports, IAPs and other supporting documents are developed;')">3.2</button>
                                    <input type="text" class="form-control text-primary" id="tactic5" list="tacticlist5" placeholder="Incident situation reports, IAPs and other supporting documents are developed;" name="3.2">
                                    <datalist id="tacticlist5">
                                        <option>Incident situation reports, IAPs and other supporting documents are developed;</option>
                                    </datalist>
                                </div>
                            </div>
                            <div class="row">
                                <div class="input-group">
                                    <button class="btn btn-outline-secondary" type="button" id="tactic6Button" onclick="toggleInputValue('tactic6', 'Conduct a direct attack on the entire fire perimeter to extinguish hotspots, prioritising containment and control actions on western sides of fire due to forecast weather;')">4.1</button>
                                    <input type="text" class="form-control text-primary" id="tactic6" list="tacticlist6" placeholder="Conduct a direct attack on the entire fire perimeter to extinguish hotspots, prioritising containment and control actions on western sides of fire due to forecast weather;" name="4.1">
                                    <datalist id="tacticlist6">
                                        <option>Conduct a direct attack on the entire fire perimeter to extinguish hotspots, prioritising containment and control actions on western sides of fire due to forecast weather;</option>
                                    </datalist>
                                </div>
                            </div>
                            <div class="row">
                                <div class="input-group">
                                    <button class="btn btn-outline-secondary" type="button" id="tactic7Button" onclick="toggleInputValue('tactic7', 'Mop up and patrol incident to minimum mop up standards 20m (ground fuels)/100m (aerial fuels) until declared safe by IC;')">4.2</button>
                                    <input type="text" class="form-control text-primary" id="tactic7" list="tacticlist7" placeholder="Mop up and patrol incident to minimum mop up standards 20m (ground fuels)/100m (aerial fuels) until declared safe by IC;" name="4.2">
                                    <datalist id="tacticlist7">
                                        <option>Mop up and patrol incident to minimum mop up standards 20m (ground fuels)/100m (aerial fuels) until declared safe by IC;</option>
                                    </datalist>
                                </div>
                            </div>
                            <div class="row">
                                <div class="input-group">
                                    <button class="btn btn-outline-secondary" type="button" id="tactic8Button" onclick="toggleInputValue('tactic8', 'Utilise aerial observation, aerial intelligence as appropriate to identify areas of focus for ground crews to extinguish and make safe;')">4.3</button>
                                    <input type="text" class="form-control text-primary" id="tactic8" list="tacticlist8" placeholder="Utilise aerial observation, aerial intelligence as appropriate to identify areas of focus for ground crews to extinguish and make safe;" name="4.3">
                                    <datalist id="tacticlist8">
                                        <option>Utilise aerial observation, aerial intelligence as appropriate to identify areas of focus for ground crews to extinguish and make safe;</option>
                                    </datalist>
                                </div>
                            </div>
                            <div class="row">
                                <div class="input-group">
                                    <button class="btn btn-outline-secondary" type="button" id="tactic8Button" onclick="toggleInputValue('tactic9', '')">Other</button>
                                    <input type="text" class="form-control text-primary" id="tactic1" list="tacticlist8" placeholder="" name="Other">
                                    <datalist id="tacticlist8">
                                        <option></option>
                                    </datalist>
                                </div>
                            </div>
                        </form>
                        <hr>
                        <form id="TriggerPoints" name="Trigger Points">
                            <legend>Trigger Points</legend>
                            <div class="row">
                                <div class="input-group">
                                    <button class="btn btn-outline-secondary" type="button" id="trigger0Button" onclick="toggleInputValue('trigger0', 'If outbreak occurs and cannot be contained within 20 minutes  IC to enact pre-determined action plan;')">1</button>
                                    <input type="text" class="form-control text-primary" id="trigger0" list="triggerlist0" placeholder="If outbreak occurs and cannot be contained within 20 minutes  IC to enact pre-determined action plan;" name="(1)">
                                    <datalist id="triggerlist0">
                                        <option>If outbreak occurs and cannot be contained within 20 minutes  IC to enact pre-determined action plan;</option>
                                    </datalist>
                                </div>
                            </div>
                            <div class="row">
                                <div class="input-group">
                                    <button class="btn btn-outline-secondary" type="button" id="trigger1Button" onclick="toggleInputValue('trigger1', 'If fire crosses <ROAD>  escalate to L2 incident. IC to enact pre-determined action plan;')">2</button>
                                    <input type="text" class="form-control text-primary" id="trigger1" list="triggerlist1" placeholder="If fire crosses <ROAD>  escalate to L2 incident. IC to enact pre-determined action plan;" name="(2)">
                                    <datalist id="triggerlist1">
                                        <option>If fire crosses <ROAD>  escalate to L2 incident. IC to enact pre-determined action plan;</option>
                                    </datalist>
                                </div>
                            </div>
                            <div class="row">
                                <div class="input-group">
                                    <button class="btn btn-outline-secondary" type="button" id="trigger2Button" onclick="toggleInputValue('trigger2', '')">3</button>
                                    <input type="text" class="form-control text-primary" id="trigger2" list="triggerlist2" placeholder="" name="(3)">
                                </div>
                            </div>                  
                        </form>
                        <hr>
                        <form id="Priorities" name="Priorities">
                            <legend>Priorities</legend>
                            <div class="row">
                                <div class="input-group">
                                    <button class="btn btn-outline-secondary" type="button" id="priority0Button">1</button>
                                    <input type="text" class="form-control text-primary" id="priority0" placeholder="" name="(1)">
                                </div>
                            </div>
                            <div class="row">
                                <div class="input-group">
                                    <button class="btn btn-outline-secondary" type="button" id="priority1Button">2</button>
                                    <input type="text" class="form-control text-primary" id="priority1" placeholder="" name="(2)">
                                </div>
                            </div>
                            <div class="row">
                                <div class="input-group">
                                    <button class="btn btn-outline-secondary" type="button" id="priority2Button">3</button>
                                    <input type="text" class="form-control text-primary" id="priority2" placeholder="" name="(3)">
                                </div>
                            </div>                
                        </form>
                    </div>
                </div>
            </div>
            <div class="accordion-item">
                <h2 class="accordion-header" id="ResourcesHeader">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseResources">
                        Resources
                    </button>
                </h2>
                <div id="collapseResources" class="accordion-collapse collapse" data-bs-parent="#SitRepAccordion">
                    <div class="accordion-body">
                        <form id="Resources" name="Resources">
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="input-group">
                                        <span class="input-group-text w-50">Current</span>
                                        <div class="form-floating">
                                            <input type="number" class="form-control"  id="CurrentAppliances" name="Current Appliances" placeholder="0">
                                            <label for="CurrentAppliances">Appliances</label>
                                        </div>
                                        <div class="form-floating">
                                            <input type="number" class="form-control" id="CurrentPersonnel" name="Current Personnel" placeholder="0">
                                            <label for="CurrentPersonnel">Personnel</label>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-md-6">
                                    <div class="input-group">
                                        <span class="input-group-text w-50">Future</span>
                                        <div class="form-floating">
                                            <input type="number" class="form-control"  id="FutureAppliances" name="Future Appliances" placeholder="0">
                                            <label for="FutureAppliances">Appliances</label>
                                        </div>
                                        <div class="form-floating">
                                            <input type="number" class="form-control" id="FuturePersonnel" name="Future Personnel" placeholder="0">
                                            <label for="FuturePersonnel">Personnel</label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row g-3">
                                <div class="form-floating">
                                    <textarea 
                                        class="form-control rounded-lg" 
                                        id="AdditionalOnSite"
                                        name="Additional On Site"
                                        style="height: 400px"></textarea>
                                    <label for="AdditionalOnSite">Additional On Site</label>
                                </div>
                            </div>
                            <div class="row g-3">
                                <div class="form-floating">
                                    <textarea 
                                        class="form-control rounded-lg" 
                                        id="AdditionalDeparted"
                                        name="Additional Departed"
                                        style="height: 400px"></textarea>
                                    <label for="AdditionalDeparted">Additional Departed</label>
                                </div>
                            </div>
                            <div class="row g-3">
                                <div class="form-floating">
                                    <textarea 
                                        class="form-control rounded-lg" 
                                        id="RequiredResources"
                                        name="Required"
                                        style="height: 400px"></textarea>
                                    <label for="RequiredResources">Required</label>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            <div class="accordion-item">
                <h2 class="accordion-header" id="SafetyHeader">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSafety">
                        Safety and Welfare
                    </button>
                </h2>
                <div id="collapseSafety" class="accordion-collapse collapse" data-bs-parent="#SitRepAccordion">
                    <div class="accordion-body">
                        <form id="SafetyAndWelfare" name="Safety and Welfare">
                            <div class="row g-3">
                                <div class="form-floating">
                                    <textarea 
                                        class="form-control rounded-lg" 
                                        id="Safety"
                                        name="Safety"
                                        style="height: 400px"></textarea>
                                    <label for="Safety">Safety</label>
                                </div>
                            </div>
                            <div class="row g-3">
                                <div class="form-floating">
                                    <textarea 
                                        class="form-control rounded-lg" 
                                        id="Welfare"
                                        name="Wefare"
                                        style="height: 400px"></textarea>
                                    <label for="Welfare">Welfare</label>
                                </div>
                            </div>                        
                        </form>
                    </div>
                </div>
            </div>
            <div class="accordion-item">
                <h2 class="accordion-header" id="OtherNotesHeader">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOtherNotes">
                        Other Notes
                    </button>
                </h2>
                <div id="collapseOtherNotes" class="accordion-collapse collapse" data-bs-parent="#SitRepAccordion">
                    <div class="accordion-body">
                        <form id="OtherNotes" name="Other Notes">
                            <div class="row g-3">
                                <div class="form-floating">
                                    <textarea 
                                        class="form-control rounded-lg" 
                                        id="Notes"
                                        name="Notes"
                                        style="height: 1000px"></textarea>
                                    <label for="Notes">Notes</label>
                                </div>
                            </div>                        
                        </form>
                    </div>
                </div>
            </div>            
            <div class="accordion-item">
                <h2 class="accordion-header" id="NextUpdate">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseNextUpdate">
                        Next Update
                    </button>
                </h2>
                <div id="collapseNextUpdate" class="accordion-collapse collapse" data-bs-parent="#SitRepAccordion">
                    <div class="accordion-body">
                        <form id="NextUpdate" name="Next Update">
                            <div class="row">
                                <div class="input-group col-sm">
                                        <span class="input-group-text">Next Update</span>
                                        <input type="text" class="form-control" list="UpdateList" id="NextUpdateTime" name="At" placeholder="..."/>
                                            <datalist id="UpdateList">
                                                <option id='1hr' value="">+1hr</option>
                                                <option id='2hr' value="">+2hr</option>
                                                <option id='6hr' value="">+6hr</option>
                                                <option id='12hr' value="">+12hr</option>
                                            </datalist>

                                </div>
                                <div class="input-group col-sm">
                                    <span class="input-group-text">Now +</span>
                                    <button class="btn btn-secondary" type="button" onclick="updateTimeButton('NextUpdateTime', 1)">1 hr</button>
                                    <button class="btn btn-secondary" type="button" onclick="updateTimeButton('NextUpdateTime', 2)">2 hrs</button>
                                    <button class="btn btn-secondary" type="button" onclick="updateTimeButton('NextUpdateTime', 6)">6 hrs</button>
                                    <button class="btn btn-secondary" type="button" onclick="updateTimeButton('NextUpdateTime', 12)">12 hrs</button>
                                </div>
                            </div>
                            <div class="row">
                                <div class="input-group col-sm">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text">Email</span>
                                    </div>
                                    <input class="form-control" type="email" list="EmailList" id="Email" placeholder="..."/>
                                        <datalist id="EmailList">
                                        </datalist>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>

        <div class="container-lg fixed-bottom p-3 bg-body shadow bg-opacity-100 founded-lg">
		<!--<hr> -->

            <label for="YAML" class="fw-bold">Output</label>
            <div class="textarea-container" style="position: relative;">
                <textarea 
                                class="form-control rounded-lg" 
                                id="YAML"
                                style="height: 400px"></textarea>
                <div style="position: absolute; top: 5px; right: 5px;">
                    <!-- <button type="button" class="btn btn-primary" id="Export" onclick="exportYAML()">Generate</button>
                    <button type="button" class="btn btn-warning" id="Import" onclick="importYAML()">Import</button> -->
                    <button type="button" class="btn btn-success" id="emailButton" onclick="emailYAML()">Email</button>
                    <button type="button" class="btn btn-primary" id="copyButton" onclick="copyYAML()">Copy</button>
                    <button type="button" class="btn btn-secondary" id="printButton" data-bs-toggle="modal" data-bs-target="#printModal" onclick="printYAML()">Print</button>
                </div>
            </div>

            <div class="container">
                <div class="row justify-content-between">
                    <div class="col-4 text-start">
                        <div class="form-check form-switch">
                            <input class="form-check-input" type="checkbox" role="switch" id="theme_Toggle">
                            <label class="form-check-label" for="theme_Toggle">Dark Mode</label>
                        </div>
                    </div>
                    <div class="col-4 text-end">
                        <button type="button" class="btn btn-primary" id="Help" data-bs-toggle="modal" data-bs-target="#helpModal">Help</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Modal -->
        <div class="modal fade" id="helpModal" tabindex="-1">
            <div class="modal-dialog modal-dialog-scrollable">
                <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="helpModalLabel">Sit-Rep Tool</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p>
                    This tool is designed to make the production of situation reports for bushfire incidents, primarily for submission via email. The generated output is in plain text, and will translate well into CAD/WebEOC comments.
                    </p>
                    <p>
                    The tool is suitable for Level 1 and Level 2 incidents, however it does not replace an IAP or IAP-Lite. It is intended for situation reporting only.
                    </p>
                    <p>
                    Most fields in the template permit free test. Fields with "..." also contain pre-canned options that can be selected. Only fields that have entries will be presented in the generated report.
                    </p>
                    <p>
                    Changes to the fields will be immediately updated in the Output text area, and changes to the Output will also be immediately imported into the form fields.
                    </p>
                    <p>
                    The "Email" button will take the current report and open a new email, using your default email program.
                    </p>
                    <p>
                    The "Copy" button will copy the contents of the Output field into your clipboard.
                    </p>
                    <p>
                    <p>
                    The "Print" button will produce a formatted output, suitable for printing or saving.
                    </p>
                    Laslty, this tool is a self contained html file. Feel free to save this page and use it locally - all of the required components and libraries are included within a single file and may be used offline.
                    </p>
                    <p>
                    If you have any questions or suggestions for this tool, please email <a href="mailto:Adrian@SawyersValley.bfb.asn.au">Adrian@SawyersValley.bfb.asn.au</a>.
                    </p>
                    Version: 1.1.0<br>
                    Date: 2025-11-23<br>
                    Licensed under the <a href="https://www.gnu.org/licenses/gpl-3.0.en.html">GPLv3.0</a><br>(excluding the <a href="https://getbootstrap.com/">Bootstrap</a> and <a href="https://github.com/nodeca/js-yaml">js-yaml</a> libraries)<br>
                    <a href="https://github.com/AWoodley/SitRep">https://github.com/AWoodley/SitRep</a>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
                </div>
            </div>
        </div>


        <div class="modal fade" id="printModal" tabindex="-1">
            <div class="modal-dialog modal-dialog-scrollable modal-xl">
                <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title" id="helpModalLabel">Print</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body" id="printModalArea">

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" onclick="window.print()">Print</button>
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
                </div>
            </div>
        </div>
    </div>

    <div class="printable text-dark" id="printArea"></div>

    <script>
        function toggleInputValue(targetId, text) {
            const inputElement = document.getElementById(targetId);
            if (!inputElement) {
                console.error(`input target not found: #${targetId}`);
                return;
            }

            if (inputElement.value) {
                inputElement.value = '';
            } else {
                inputElement.value = text;
            }
            // toggleInputBold(targetId);
        } 

        function toggleInputBold(targetId) {
            const inputElement = document.getElementById(targetId);
            if (!inputElement) {
                console.error(`input target not found: #${targetId}`);
                return;
            }

            if (inputElement.value) {
                inputElement.style.fontWeight = 'bold';
            } else {
                inputElement.style.fontWeight = 'normal';
            }
        }

        Date.prototype.addHours = function(h) {
            this.setTime(this.getTime() + (h*60*60*1000));
            return this;
        }

        Date.prototype.roundHalfHour = function() {
            var hour = this.getHours();
            var minutes = this.getMinutes();
            var ampm = "AM";
            if (minutes < 15) {
                minutes = "00";
            } else if (minutes < 45){
                minutes = "30";
            } else {
                minutes = "00";
                ++hour;
            }

            this.setHours(hour);
            this.setMinutes(minutes);

            return this;
        }


        function formatDate(thisDate) {
            roundedDate = thisDate.roundHalfHour();

            var day = roundedDate.getDate();
            var month = roundedDate.getMonth() + 1;
            var year = roundedDate.getFullYear();

            var hours = roundedDate.getHours().toString().padStart(2, 0);
            // var hours = hrs.padStart(2,0);
            var minutes = roundedDate.getMinutes().toString().padStart(2, 0);

            var dateString = hours + ":" + minutes + " " + day + "/" + month + "/" + year + " ";

            return dateString;
        }


        function getDate() {
            var time = new Date();

            var dateString = formatDate(time);

            let AtDateTime = document.getElementById('AtDateTime');

            if (AtDateTime) {
                AtDateTime.value = dateString;
            }

            const updates = {
                '1hr': 1,
                '2hr': 2,
                '6hr': 6,
                '12hr': 12
            };

            for (update in updates) {
                var nextUpdate = time.addHours(updates[update]);
                let thisUpdate = document.getElementById(update);
                if (thisUpdate) {
                    thisUpdate.value = formatDate(nextUpdate);
                }
            }
            
        }
        

        function updateTimeButton(targetId, updateTime) {
            const inputElement = document.getElementById(targetId);
            if (!inputElement) {
                console.error(`input target not found: #${targetId}`);
                return;
            }

            var time = new Date();

            var nextUpdate = time.addHours(updateTime);
            inputElement.value = formatDate(nextUpdate);
            exportYAML();
        }


        function addBlankLineBeforeUnindented(multilineString) {
            const lines = multilineString.split('\n');
            const result = [];

            for (const line of lines) {
                if (line.length > 0 && !line.startsWith(' ')) {
                    result.push(''); 
                }
                
                result.push(line);
            }

            let finalResult = result;
            if (finalResult[0] === '') {
                finalResult = finalResult.slice(1);
            }

            return finalResult.join('\n');
        }


        function exportYAML() {
            const allForms = document.forms;
            const outputField = document.getElementById("YAML");
            const outputObject = {};

            for (let i = 0; i < allForms.length; i++) {
                const currentForm = allForms[i];
                if (currentForm.name != '') {

                    const formData = new FormData(currentForm);
                    const keysToDelete = [];


                    for (const pair of formData) {
                        const key = pair[0];
                        const value = pair[1];

                        if (value === '...' || !value) {
                            keysToDelete.push(key);
                        }
                    }

                    for (const key of keysToDelete) {
                        formData.delete(key);
                    }
                    if (Array.from(formData.keys()).length > 0) {
                        outputObject[currentForm.name] = Object.fromEntries(formData.entries());
                    }
                }
            }

            let output = jsyaml.dump(outputObject, {'lineWidth': -1});

            output = output.replaceAll('{}', '');
            output = output.replaceAll('\'', '');
            output = addBlankLineBeforeUnindented(output);

            outputField.value = output;

            localStorage.setItem('from', document.getElementById("From").value);
            localStorage.setItem('email', document.getElementById("Email").value);
            document.title = "INC" + document.getElementById("IncidentNumber").value + " " + document.getElementById("IncidentName").value + " Update: " + document.getElementById("AtDateTime").value;
        }


        function printYAML() {
            const allForms = document.forms;
            const outputField = document.getElementById("YAML");
            const outputObject = {};
            const printModelArea = document.getElementById("printModalArea");
            const printArea = document.getElementById("printArea");


            for (let i = 0; i < allForms.length; i++) {
                const currentForm = allForms[i];
                if (currentForm.id != '') {

                    const formData = new FormData(currentForm);
                    const keysToDelete = [];

                    let newDiv = document.createElement('div');
                    newDiv.id = "print" + currentForm.id;
                    newDiv.innerHTML = "<h2>" + currentForm.name + "</h2>";

                    let divContents = "";

                    for (const pair of formData) {
                        const key = pair[0];
                        const value = pair[1];

                        if (value === '...' || !value) {
                            keysToDelete.push(key);
                        } else {
                            let newLine = key + ": ";
                            if (value.includes('\n')) {
                                newLine += "<br>" + value;
                                newLine = newLine.replace(/(?:\r\n|\r|\n)/g, '<br>');
                            } else {
                                newLine += value;
                            }
                            divContents += newLine + "<br>";
                        }
                    }

                    if (divContents) {
                        divContents += '<br>';
                        newDiv.innerHTML += divContents;
                        printModalArea.appendChild(newDiv);
                    }
                }
            }
            printArea.innerHTML = printModalArea.innerHTML;
        }


        // function printModal() {
        //     const printModalArea = document.getElementById("printModalArea");
        //     const printArea = document.getElementById("printArea");

        //     printArea.innerHTML = printModalArea.innerHTML;

        //     window.print();
        // }

        function addWhitespaceToLines(text, whitespace = '  ') {
            // The regular expression looks for the end of a line ($)
            // that is NOT preceded by a colon ((?<!:))
            const regex = new RegExp(`(?<!:)$`, 'gm');

            // The 'm' flag makes '$' match the end of a line/string.
            // The 'g' flag makes it global, replacing all matches.
            return text.replace(regex, `${whitespace}$1`);
        }


        const upperize = obj =>
            Object.keys(obj).reduce((acc, k) => {
                acc[k.toUpperCase()] = obj[k];
                return acc;
            }, {});


        function titleCase(str) {
            var splitStr = str.toLowerCase().split(' ');
            for (var i = 0; i < splitStr.length; i++) {
                // You do not need to check if i is larger than splitStr length, as your for does that for you
                // Assign it back to the array
                splitStr[i] = splitStr[i].charAt(0).toUpperCase() + splitStr[i].substring(1);     
            }

            // Directly return the joined string
            return splitStr.join(' '); 
        }
    

        function findElementIgnoreCase(formElement, searchKey) {
            const upperCaseKey = searchKey.toUpperCase();

            return Array.from(formElement.elements).find(element =>
                element.name && element.name.toUpperCase() === upperCaseKey
            );
        }

        function importYAML() {
            const allForms = document.forms;
            const regex = /(.*)(?<!:)$/gm;
            let input = document.getElementById("YAML").value;

            input = input.replaceAll('@:', 'At:');
            input = input.replace(regex, '  $1');

            try {
                const yamlObject = upperize(jsyaml.load(input));
                for (let i = 0; i < allForms.length; i++) {
                    const currentForm = allForms[i];
                    const formName = currentForm.name.toUpperCase();


                    if (formName != '') {
                        const currentYAMLObject = yamlObject[formName];
                        // const currentYAMLObjectUpper = upperize(currentYAMLObject);
                        for (const key in currentYAMLObject) {
                            if (currentYAMLObject.hasOwnProperty(key)) {
                                const searchKey = '/' + key + '/i'; 
                                // const formElement = currentForm.element[key];
                                const formElement = findElementIgnoreCase(currentForm, key);

                                if (formElement) {
                                    if (formElement.type === 'checkbox' || formElement.type === 'radio') {
                                        formElement.checked = currentYAMLObject[key];
                                    } else if (formElement.type === 'select-one') {
                                        const optionsList = formElement.options;
                                        for (const option of optionsList) {
                                            if (option.value.toUpperCase() === currentYAMLObject[key].toUpperCase()) {
                                                formElement.value = option.value;
                                            }
                                        }
                                    } else {
                                        formElement.value = currentYAMLObject[key];
                                    }
                                }
                            }
                        }
                    }
            }
            } catch (e) {
                console.error(e);
                return false;
            }
            document.title = "INC" + document.getElementById("IncidentNumber").value + " " + document.getElementById("IncidentName").value + " Update: " + document.getElementById("AtDateTime").value;
        }


        function emailYAML() {
            exportYAML();
            const email = document.getElementById("Email").value;
            var subject = "INC" + document.getElementById("IncidentNumber").value + " " + document.getElementById("IncidentName").value + " Update: " + document.getElementById("AtDateTime").value;
            const body = document.getElementById("YAML").value;

            var mailtoLink = "mailto:" + email + "?subject=" + encodeURIComponent(subject) + "&body=" + encodeURIComponent(body);

            window.location.href = mailtoLink;
        }


        function copyYAML() {
            const textarea = document.getElementById('YAML');
            navigator.clipboard.writeText(textarea.value)
                .catch(err => {
                    console.error('Failed to copy text: ', err);
                });
        }


        async function loadJSON(url) {
            try {
                // 1. Send the request
                const response = await fetch(url);

                // 2. Check if the response was successful (status code 200-299)
                if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
                }

                // 3. Parse the response body as JSON
                const data = await response.json();

                // 4. Return the resulting JSON object
                return data;

            } catch (error) {
                console.error('There was a problem with the fetch operation:', error);
                // You can re-throw the error or return null/an empty object
                throw error; 
            }
        }


        async function populateIncidentNumbers() {
            const incidentNumbers = document.getElementById('IncidentNumberList');
            var incidents=[];

            try {
                const incidentsJSON = await loadJSON('https://api.emergency.wa.gov.au/v1/incidents');
                
                for (const incidentObject of incidentsJSON['incidents']) {
                    if (incidentObject['incident-type'] === 'Bushfire') {
                        let newObject = { number: incidentObject['cad-id'], name: titleCase(incidentObject['location']['value'])};
                        incidents.push(newObject);
                    }
                }
            
                console.log(incidents);
            } catch (error) {
                console.error('There was a problem with the fetch operation:', error);
                // You can re-throw the error or return null/an empty object
                throw error; 
            }

            for (const incident of incidents) {
                const newIncidentNumber = document.createElement('option');
                newIncidentNumber.value=incident['number'];
                incidentNumbers.appendChild(newIncidentNumber);
            }

        }


        window.onload = function() {
            getDate();

            populateIncidentNumbers();

            const themeToggle = document.getElementById('theme_Toggle'); // Assuming you have a toggle with this ID
            const htmlElement = document.documentElement;
            themeToggle.addEventListener('change', () => {
                if (themeToggle.checked) {
                    htmlElement.setAttribute('data-bs-theme', 'dark');
                } else {
                    htmlElement.setAttribute('data-bs-theme', 'light');
                }
                // Optional: Save preference to local storage
                localStorage.setItem('theme', htmlElement.getAttribute('data-bs-theme'));
            });


            // Optional: Load preference on page load
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme) {
                htmlElement.setAttribute('data-bs-theme', savedTheme);
                if (savedTheme === 'dark') {
                    themeToggle.checked = true;
                }
            }

            const savedFrom = localStorage.getItem('from');
            if (savedFrom) {
                document.getElementById("From").value = savedFrom;
            }

            const savedEmail = localStorage.getItem('email');
            if (savedEmail) {
                document.getElementById("Email").value = savedEmail;
            }


            const allForms = document.forms;
            for (let i = 0; i < allForms.length; i++) {
                const currentForm = allForms[i];

                currentForm.addEventListener('change', exportYAML);
            }

            const outputField = document.getElementById("YAML");
            outputField.addEventListener('change', importYAML);

            // var html5QrcodeScanner = new Html5QrcodeScanner(
	        // "reader", { fps: 10, qrbox: 250 });
            // html5QrcodeScanner.render(onScanSuccess);
        }
    </script>
</body>
</html>
